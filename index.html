<!--  <audio id="mi-audio" src="audio/pockemonaudio.mp3" autoplay loop></audio> -->


<canvas id="canvas"></canvas>




<script>

  // const miAudio = document.getElementById("mi-audio");
  //miAudio.play();


  //Script para el audio de inicio


    //INICIO DEL CANVAS

  var canvas = document.getElementById("canvas");
  var context = canvas.getContext("2d");
  var imagen = new Image();
  imagen.src = "img/pockemon.png";
  imagen.onload = function () {

    context.drawImage(imagen, 180, 10, 450, 180);

  }  

  canvas.width = 800;
  canvas.height = 600;

   var font = new FontFace('pokemon', 'url(fonts/PokemonHollow.ttf)');
    font.load().then(function (loadedFont) {
    document.fonts.add(loadedFont);

    context.font = '30px pokemon';
    context.fillText('1.- J U E G O    N U E V O', 180, 500);
    context.fillText('2 -  S A L I R', 180, 550);

    canvas.addEventListener("click", function (event) {

    })

  }); 

//Aqui se estara creando los objetos base con las que vamos interactuar mas adelante

const housebase = ({name = 'casa', x = 0, y = 0, width = 130, height = 100, routeImage = null}) => ({

name,
x,
y,
width,
height,
routeImage,

        draw () {

            //context.fillRect(this.x, this.y, this.w, this.h);
      
            var myImage = new Image();
            myImage.src = routeImage;   
            myImage.onload = function () {

                context.drawImage(myImage, x, y, width, height);

            } 
      
            context.font = '30px pokemon';
            context.fillText(this.name, this.x + 30 , this.y + 125);
        }

});

const city = ({name = 'Principal', x = null, y = null, width = null, height = null, routeImage = null}) => ({

name,
x,
y,
width,
height,
routeImage,

          draw () {

                //context.fillRect(this.x, this.y, this.w, this.h);

                var myImage = new Image();
                myImage.src = routeImage;   
                myImage.onload = function () {

                    context.drawImage(myImage, width, height, 800, 600);

                } 

              }

})

const player = ({name = 'player', x = 0, y = 0, width = 130, height = 100, routeImage = null, speed = 5}) => ({

name,
x,
y,
width,
height,
speed: 5,
routeImage,
            draw () {

            //context.fillRect(this.x, this.y, this.w, this.h);

            var myImage = new Image();
            myImage.src = routeImage;   
            myImage.onload = function () {

                context.drawImage(myImage, x, y, 50, 50);
                context.font = 'bold 20px arial';
                context.fillText(this.name, this.x , this.y);

            } 

          }

})


//Para saber las coordenada del puntero
canvas.addEventListener("mousemove", function(event) {
  // Obtiene las coordenadas del click
  var x = event.clientX - canvas.offsetLeft;
  var y = event.clientY - canvas.offsetTop;
  console.log("valor de x " + x)
  console.log("valor de y " + y)
  });

//Nos permite iniciar un nuevo juego una vez presionar el boton Nuevo juego
canvas.addEventListener("click", function(event) {
  // Obtiene las coordenadas del click
  var x = event.clientX - canvas.offsetLeft;
  var y = event.clientY - canvas.offsetTop;
  console.log("valor de x " + x)
  console.log("valor de y " + y)

  // Verifica si el click está dentro del área del texto de "Nuevo Juego"
  if (x >= 55 && x <= 489 && y >= 470 && y <= 504) {

      context.clearRect(0, 0, canvas.width, canvas.height)

    springTown = city({
    name: 'SpringTown',
    width: 0,
    height: 0,
    routeImage : "img/puebloprimavera.png"

    })

    springTown.draw()

    
  // VAMOS A DEFINIR LOS DATOS DE LA CASA, EL TAMAñO ENTRE OTROS


    house1 = housebase({
    name        :   'casa 1', 
    x           :   canvas.height - 520, 
    y           :   canvas.width - 520,
    width       :   210,
    height      :   180,  
    routeImage  :   "img/casa1.png"
    });

    house1.draw()

    house2 = housebase({
    name        :   'casa 2', 
    x           :   canvas.height - 210, 
    y           :   canvas.width - 480,
    width       :   250,
    height      :   180, 
    routeImage  :   "img/casa2.png"

    });

    house2.draw() 

    var firstplayer = player({

    name        :    "Carlos",
    x           :    650 ,
    y           :    280 ,
    routeImage  :    "img/player.png",
    speed       :    5,

    });

 


    //aqui vamos a capturar el movimiento del personaje
    
    window.addEventListener("keydown", (event) => {


        switch(event.key){

          case 'ArrowUp':

          firstplayer.y -= 10; // Mover hacia arriba
            break;

          case 'ArrowDown':

          firstplayer.y += 10; // Mover hacia abajo
            break;

          case 'ArrowLeft':

          firstplayer.x -= 10; // Mover hacia la izquierda
            break;

          case 'ArrowRight':

          firstplayer.x += 10; // Mover hacia la derecha
            break;

          default:
            break;

      }
 
      var firstplayer1 = player({

        name        :    "Carlos",
        x           :    firstplayer.x,
        y           :    firstplayer.y ,
        routeImage  :    "img/player.png",
        speed       :    5,

        });

        springTown.draw()
        firstplayer1.draw()
        context.clearRect(0, 0, canvas.width, canvas.height);


    })
    


  }

  });

 
</script>
<link rel="stylesheet" href="style.css">